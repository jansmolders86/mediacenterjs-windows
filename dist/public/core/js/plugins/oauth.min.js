(function(){var E={oauthd_url:"https://oauth.io/auth"};E.oauthd_base=B(E.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0];var d=[];var j;(function o(){var I=/[\\#&]oauthio=([^&]*)/.exec(document.location.hash);if(I){document.location.hash="";j=decodeURIComponent(I[1].replace(/\+/g," "));var J=c("oauthio_state");if(J){d.push(J);F("oauthio_state")}}})();function B(I){if(I[0]==="/"){I=document.location.protocol+"//"+document.location.host+I}else{if(!I.match(/^.{2,5}:\/\//)){I=document.location.protocol+"//"+document.location.host+document.location.pathname+"/"+I}}return I}function H(J){var K;var I;try{K=JSON.parse(J.data)}catch(L){}if(!K||!K.provider){return}if(J.provider&&K.provider.toLowerCase()!==J.provider.toLowerCase()){return}if(K.status==="error"||K.status==="fail"){I=new Error(K.message);I.body=K.data;return J.callback(I)}if(K.status!=="success"||!K.data){I=new Error();I.body=K.data;return J.callback(I)}if(!K.state||d.indexOf(K.state)==-1){return J.callback(new Error("State is not matching"))}if(!J.provider){K.data.provider=K.provider}return J.callback(null,K.data)}window.OAuth={initialize:function(I){E.key=I},popup:function(N,K,P){var J;if(!E.key){return P(new Error("OAuth object must be initialized"))}if(arguments.length==2){P=K;K={}}if(!K.state){K.state=A();K.state_type="client"}d.push(K.state);var I=E.oauthd_url+"/"+N+"?k="+E.key;I+="&d="+encodeURIComponent(B("/"));if(K){I+="&opts="+encodeURIComponent(JSON.stringify(K))}var M={width:Math.floor(window.outerWidth*0.8),height:Math.floor(window.outerHeight*0.5)};if(M.height<350){M.height=350}if(M.width<800){M.width=800}M.left=window.screenX+(window.outerWidth-M.width)/2;M.top=window.screenY+(window.outerHeight-M.height)/8;var O="width="+M.width+",height="+M.height;O+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";O+=",left="+M.left+",top="+M.top;var K={provider:N};function L(Q){if(Q.source!==J||Q.origin!==E.oauthd_base){return}K.data=Q.data;return H(K)}K.callback=function(R,Q){if(window.removeEventListener){window.removeEventListener("message",L,false)}else{if(window.detachEvent){window.detachEvent("onmessage",L)}else{if(document.detachEvent){document.detachEvent("onmessage",L)}}}K.callback=function(){};return P(R,Q)};if(window.attachEvent){window.attachEvent("onmessage",L)}else{if(document.attachEvent){document.attachEvent("onmessage",L)}else{if(window.addEventListener){window.addEventListener("message",L,false)}}}setTimeout(function(){K.callback(new Error("Authorization timed out"))},600*1000);J=window.open(I,"Authorization",O);if(J){J.focus()}},redirect:function(L,K,J){if(arguments.length==2){J=K;K={}}if(!K.state){K.state=A();K.state_type="client"}u("oauthio_state",K.state);var I=encodeURIComponent(B(J));J=E.oauthd_url+"/"+L+"?k="+E.key;J+="&redirect_uri="+I;if(K){J+="&opts="+encodeURIComponent(JSON.stringify(K))}document.location.href=J},callback:function(I,J){if(!j){return}if(arguments.length===1){return H({data:j,callback:I})}return H({data:j,provider:I,callback:J})}};function A(){var I=m((new Date()).getTime()+":"+Math.floor(Math.random()*9999999));return I.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}function u(K,L){F(K);var J=new Date();J.setTime(J.getTime()+600000);var I="; expires="+J.toGMTString();document.cookie=K+"="+L+I+"; path=/"}function c(J){var L=J+"=";var I=document.cookie.split(";");for(var K=0;K<I.length;K++){var M=I[K];while(M.charAt(0)==" "){M=M.substring(1,M.length)}if(M.indexOf(L)==0){return M.substring(L.length,M.length)}}return null}function F(J){var I=new Date();I.setTime(I.getTime()-86400000);document.cookie=J+"=; expires="+I.toGMTString()+"; path=/"}var t=0;var C="";function q(I){return D(b(s(I)))}function m(I){return a(b(s(I)))}function G(I,J){return e(b(s(I)),J)}function h(I,J){return D(k(s(I),s(J)))}function l(I,J){return a(k(s(I),s(J)))}function g(I,K,J){return e(k(s(I),s(K)),J)}function f(){return q("abc").toLowerCase()=="a9993e364706816aba3e25717850c26c9cd0d89d"}function b(I){return p(i(v(I),I.length*8))}function k(K,N){var M=v(K);if(M.length>16){M=i(M,K.length*8)}var I=Array(16),L=Array(16);for(var J=0;J<16;J++){I[J]=M[J]^909522486;L[J]=M[J]^1549556828}var O=i(I.concat(v(N)),512+N.length*8);return p(i(L.concat(O),512+160))}function D(K){try{t}catch(N){t=0}var M=t?"0123456789ABCDEF":"0123456789abcdef";var J="";var I;for(var L=0;L<K.length;L++){I=K.charCodeAt(L);J+=M.charAt((I>>>4)&15)+M.charAt(I&15)}return J}function a(K){try{C}catch(O){C=""}var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var J="";var I=K.length;for(var M=0;M<I;M+=3){var P=(K.charCodeAt(M)<<16)|(M+1<I?K.charCodeAt(M+1)<<8:0)|(M+2<I?K.charCodeAt(M+2):0);for(var L=0;L<4;L++){if(M*8+L*6>K.length*8){J+=C}else{J+=N.charAt((P>>>6*(3-L))&63)}}}return J}function e(R,K){var J=K.length;var Q=Array();var P,I,S,M;var O=Array(Math.ceil(R.length/2));for(P=0;P<O.length;P++){O[P]=(R.charCodeAt(P*2)<<8)|R.charCodeAt(P*2+1)}while(O.length>0){M=Array();S=0;for(P=0;P<O.length;P++){S=(S<<16)+O[P];I=Math.floor(S/J);S-=I*J;if(M.length>0||I>0){M[M.length]=I}}Q[Q.length]=S;O=M}var L="";for(P=Q.length-1;P>=0;P--){L+=K.charAt(Q[P])}var N=Math.ceil(R.length*8/(Math.log(K.length)/Math.log(2)));for(P=L.length;P<N;P++){L=K[0]+L}return L}function s(K){var J="";var L=-1;var I,M;while(++L<K.length){I=K.charCodeAt(L);M=L+1<K.length?K.charCodeAt(L+1):0;if(55296<=I&&I<=56319&&56320<=M&&M<=57343){I=65536+((I&1023)<<10)+(M&1023);L++}if(I<=127){J+=String.fromCharCode(I)}else{if(I<=2047){J+=String.fromCharCode(192|((I>>>6)&31),128|(I&63))}else{if(I<=65535){J+=String.fromCharCode(224|((I>>>12)&15),128|((I>>>6)&63),128|(I&63))}else{if(I<=2097151){J+=String.fromCharCode(240|((I>>>18)&7),128|((I>>>12)&63),128|((I>>>6)&63),128|(I&63))}}}}}return J}function y(J){var I="";for(var K=0;K<J.length;K++){I+=String.fromCharCode(J.charCodeAt(K)&255,(J.charCodeAt(K)>>>8)&255)}return I}function n(J){var I="";for(var K=0;K<J.length;K++){I+=String.fromCharCode((J.charCodeAt(K)>>>8)&255,J.charCodeAt(K)&255)}return I}function v(J){var I=Array(J.length>>2);for(var K=0;K<I.length;K++){I[K]=0}for(var K=0;K<J.length*8;K+=8){I[K>>5]|=(J.charCodeAt(K/8)&255)<<(24-K%32)}return I}function p(J){var I="";for(var K=0;K<J.length*32;K+=8){I+=String.fromCharCode((J[K>>5]>>>(24-K%32))&255)}return I}function i(V,P){V[P>>5]|=128<<(24-P%32);V[((P+64>>9)<<4)+15]=P;var W=Array(80);var U=1732584193;var T=-271733879;var S=-1732584194;var R=271733878;var Q=-1009589776;for(var M=0;M<V.length;M+=16){var O=U;var N=T;var L=S;var K=R;var I=Q;for(var J=0;J<80;J++){if(J<16){W[J]=V[M+J]}else{W[J]=z(W[J-3]^W[J-8]^W[J-14]^W[J-16],1)}var X=w(w(z(U,5),x(J,T,S,R)),w(w(Q,W[J]),r(J)));Q=R;R=S;S=z(T,30);T=U;U=X}U=w(U,O);T=w(T,N);S=w(S,L);R=w(R,K);Q=w(Q,I)}return Array(U,T,S,R,Q)}function x(J,I,L,K){if(J<20){return(I&L)|((~I)&K)}if(J<40){return I^L^K}if(J<60){return(I&L)|(I&K)|(L&K)}return I^L^K}function r(I){return(I<20)?1518500249:(I<40)?1859775393:(I<60)?-1894007588:-899497514}function w(I,L){var K=(I&65535)+(L&65535);var J=(I>>16)+(L>>16)+(K>>16);return(J<<16)|(K&65535)}function z(I,J){return(I<<J)|(I>>>(32-J))}})();